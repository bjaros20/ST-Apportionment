#Attempt to Get Revenue in R
install.packages("readxl")
install.packages("tidyr")
install.packages("dplyr")
install.packages("did")
install.packages("tidyverse")
install.packages("lmtest")
library(readxl)
library(tidyr)
library(dplyr)
library(did)
library(tidyverse)
library(lmtest)
Census State and Local Data- Tax Foundation
# Census State and Local Data- Tax Foundation
install.packages("readxl")
install.packages("tidyr")
install.packages("dplyr")
install.packages("tidyverse")
install.packages("xlsx")
library(readxl)
library(tidyr)
library(dplyr)
library(tidyverse)
library(xlsx)
#set working directory
setwd("~/Documents/GitHub/ST-Apportionment")
#Load Apportionment Document
All_App_df <-read_csv("SalesFactorWeights_ALLStates.csv")
#Second Week Cleaning Attempt, want to eliminate TX:
install.packages("tidyr")
install.packages("dplyr")
install.packages("tidyverse")
library(tidyr)
library(dplyr)
library(tidyverse)
#set working directory
setwd("~/Documents/GitHub/ST-Apportionment")
#Load Apportionment Document
All_App_df <-read_csv("SalesFactorWeights_ALLStates.csv")
CIT_Rev_df <-read.csv("SCIT_Rev_Long.csv")
glimpse(All_App_df)
glimpse(CIT_Rev_df)
#Make Revenue Log Column
CIT_Rev_df$Log_Revenue <-log(CIT_Rev_df$Revenue)
View(CIT_Rev_df)
# Create a mapping of state abbreviations to full names
state_mapping <- data.frame(StateAbbrev = c("AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY"),
StateFullName = c("Alabama", "Alaska", "Arizona", "Arkansas", "California", "Colorado", "Connecticut", "Delaware", "Florida", "Georgia", "Hawaii", "Idaho", "Illinois", "Indiana", "Iowa", "Kansas", "Kentucky", "Louisiana", "Maine", "Maryland", "Massachusetts", "Michigan", "Minnesota", "Mississippi", "Missouri", "Montana", "Nebraska", "Nevada", "New Hampshire", "New Jersey", "New Mexico", "New York", "North Carolina", "North Dakota", "Ohio", "Oklahoma", "Oregon", "Pennsylvania", "Rhode Island", "South Carolina", "South Dakota", "Tennessee", "Texas", "Utah", "Vermont", "Virginia", "Washington", "West Virginia", "Wisconsin", "Wyoming"))
# Merge CIT_Rev_Year with the state mapping to add a StateFullName column
CIT_Rev_Year <- merge(CIT_Rev_Year, state_mapping, by.x = "State", by.y = "StateAbbrev", all.x = TRUE)
# Merge CIT_Rev_Year with the state mapping to add a StateFullName column
CIT_Rev_aLL <- merge(CIT_Rev_df,state_mapping, by.x = "State", by.y = "StateAbbrev", all.x = TRUE)
colnames(All_App_df)[colnames(All_App_df) == "year"] <- "Year"
colnames(All_App_df)[colnames(All_App_df) == "state"] <- "StateFullName"
# If not, replace them with your actual column names
merged_df <- merge(CIT_Rev_all, All_App_df, by = c("StateFullName", "Year"))
merged_df <- merge(CIT_Rev_aLL, All_App_df, by = c("StateFullName", "Year"))
View(merged_df)
#Clean Up Panel
#Remove State abbreviation
merged_df <- subset(merged_df, select = -State)
# Assuming "StateFullName" is the column you want to rename
colnames(merged_df)[colnames(merged_df) == "StateFullName"] <- "State"
View(merged_df)
#Remove Texas, it is not a Corporate Income Tax State, the df only has 8 years and the revenue for each of those years is 0
merged_df1%>%
filter(merged_df$State=-Texas)
#Remove Texas, it is not a Corporate Income Tax State, the df only has 8 years and the revenue for each of those years is 0
merged_df1<-merged_df%>%
filter(State !="Texas")
View(merged_df1)
# Assuming merged_df is the data frame you want to save
write.csv(merged_df1, file = "LogRev_Appt_Merge_1976-2021.csv", row.names = FALSE)
# Assuming merged_df is the data frame you want to save
write.csv(merged_df1, file = "LogRev_Appt_Merge_1976-2021.csv", row.names = FALSE)
#Load Cleaned Set-up
Initial_df <-read.csv("LogRev_Appt_Merge_1976-2021.csv")
View(Initial_df)
#Remove Region and Number
Clean_Set_up <- subset(Initial_df, select = -c(Region, Number,Revenue))
#All States before 2007
Set_Up_1976_2007 <-subset(Clean_Set_up,Year >=1976 & Year <=2007)
#All States before 2000
Set_Up_1976_1999 <-subset(Clean_Set_up,Year >=1976 & Year <=1999)
#Sort Into TreatMent and Control Groups
Just_NE <- subset(Clean_Set_up, State == "Nebraska")
View(Just_NE)
View(Just_NE)
#Create Control Group For 1976 through 2007
Control_2007_Df <-  %>% Set_Up_1976_2007 %>%
#Create Control Group For 1976 through 2007
Control_2007_Df <-  Set_Up_1976_2007 %>%
group_by(State) %>%
filter(all(sales == 33.34))
View(Control_2007_Df)
#Create Control Group for 1976 through 1999
Control_1999_Df <-  Set_Up_1976_1999 %>%
group_by(State) %>%
filter(all(sales == 33.34))
View(Control_1999_Df)
View(Control_2007_Df)
View(Just_NE)
View(Control_2007_Df)
View(Set_Up_1976_2007)
#Lastly, create control group of Just Midwest States that don't switch at all
Control_Midwest_2007_Df <- Set_Up_1976_2007 %>%
filter(State %in% c("Illinois", "Indiana", "Iowa", "Kansas", "Michigan", "Minnesota", "Missouri", "Nebraska", "North Dakota", "Ohio", "South Dakota", "Wisconsin") & sales == 33.34)
View(Control_Midwest_2007_Df)
View(Control_2007_Df)
Control_Midwest_2007_Df <- Set_Up_1976_2007 %>%
group_by(State) %>%
filter(all(sales == 33.34)) %>%
filter(State %in% c("Illinois", "Indiana", "Iowa", "Kansas", "Michigan", "Minnesota", "Missouri", "Nebraska", "North Dakota", "Ohio", "South Dakota", "Wisconsin"))
#Create Combined Dataframes for the 3 control groups:
# Combine dataframes
combined_data_C1 <- bind_rows(Just_NE, Control_2007_Df)
combined_data_C2 <- bind_rows(Just_NE, Control_1999_Df)
combined_data_C3 <- bind_rows(Just_NE, Control_Midwest_2007_Df)
plot_data <- combined_data_C1 %>%
mutate(group = factor(ifelse(State == "Nebraska", "Nebraska", "Control"))) %>%
group_by(group, Year) %>%
summarize(mean_Log_Revenue = mean(Log_Revenue),
se_Log_Revenue = sd(Log_Revenue) / sqrt(n()),
upper = mean_Log_Revenue + (-1.96 * se_Log_Revenue),
lower = mean_Log_Revenue + (1.96 * se_Log_Revenue))
ggplot(plot_data, aes(x = Year, y = mean_Log_Revenue, color = group)) +
geom_pointrange(aes(ymin = lower, ymax = upper), size = 1) +
geom_line(aes(group = group), linetype = "dashed", alpha = 0.5) +
labs(title = "Log_Revenue Difference-in-Differences Plot",
x = "Year",
y = "Mean Log_Revenue") +
theme_minimal()
# For years before 2007
Just_NE_2007 <- subset(Clean_Set_up, State == "Nebraska" & Year < 2008)
# For years before 1999
Just_NE_1999 <- subset(Clean_Set_up, State == "Nebraska" & Year < 2000)
#Create Combined Dataframes for the 3 control groups:
# Combine dataframes
combined_data_C1 <- bind_rows(Just_NE_2007, Control_2007_Df)
combined_data_C2 <- bind_rows(Just_NE_1999, Control_1999_Df)
combined_data_C3 <- bind_rows(Just_NE_2007, Control_Midwest_2007_Df)
# Create plot for Log_Revenue with a clear distinction between Nebraska and Control
plot_data <- combined_data_C1 %>%
mutate(group = factor(ifelse(State == "Nebraska", "Nebraska", "Control"))) %>%
group_by(group, Year) %>%
summarize(mean_Log_Revenue = mean(Log_Revenue),
se_Log_Revenue = sd(Log_Revenue) / sqrt(n()),
upper = mean_Log_Revenue + (-1.96 * se_Log_Revenue),
lower = mean_Log_Revenue + (1.96 * se_Log_Revenue))
ggplot(plot_data, aes(x = Year, y = mean_Log_Revenue, color = group)) +
geom_pointrange(aes(ymin = lower, ymax = upper), size = 1) +
geom_line(aes(group = group), linetype = "dashed", alpha = 0.5) +
labs(title = "Log_Revenue Difference-in-Differences Plot",
x = "Year",
y = "Mean Log_Revenue") +
theme_minimal()
# Create plot for Log_Revenue with a clear distinction between Nebraska and Control
plot_data <- combined_data_C1 %>%
mutate(group = factor(ifelse(State == "Nebraska", "Nebraska", "Control"))) %>%
group_by(group, Year) %>%
summarize(mean_Log_Revenue = mean(Log_Revenue),
se_Log_Revenue = sd(Log_Revenue) / sqrt(n()),
upper = mean_Log_Revenue + (-1.96 * se_Log_Revenue),
lower = mean_Log_Revenue + (1.96 * se_Log_Revenue))
ggplot(plot_data, aes(x = Year, y = mean_Log_Revenue, color = group)) +
geom_pointrange(aes(ymin = lower, ymax = upper), size = 1) +
geom_line(aes(group = group), linetype = "dashed", alpha = 0.5) +
labs(title = "Log_Revenue DiD Plot- NE and Never Treated States",
x = "Year",
y = "Mean Log_Revenue") +
theme_minimal()
View(combined_data_C1)
View(combined_data_C2)
View(combined_data_C3)
View(combined_data_C1)
# Create a binary treatment variable for Nebraska and phase-in years
combined_data_C1$Treatment <- ifelse(combined_data_C1$State == "Nebraska" & combined_data_C1$Year %in% 1988:1992, 1, 0)
# Create a binary variable for the post-period
combined_data_C1$Post_Period <- ifelse(combined_data_C1$Year > 1986, 1, 0)
# Create a binary variable for the interaction term
combined_data_C1$Interaction_Term <- combined_data_C1$Treatment * combined_data_C1$Post_Period
# Set up the DiD regression
did_model <- lm(Log_Revenue ~ Treatment + Post_Period + Interaction_Term + factor(Year) - 1, data = combined_data_C1)
# View the regression results
summary(did_model)
# Create DiD plot
library(ggplot2)
did_plot <- ggplot(combined_data_C1, aes(x = Year, y = Log_Revenue, color = factor(Treatment))) +
geom_line(aes(group = State), linetype = "dashed", alpha = 0.5) +
geom_smooth(aes(group = Treatment), method = "lm", se = FALSE) +
labs(title = "Difference-in-Differences Plot",
x = "Year",
y = "Log_Revenue") +
theme_minimal()
# Display the plot
print(did_plot)
did_plot <- ggplot(combined_data_C1, aes(x = Year, y = Log_Revenue, color = factor(Treatment))) +
geom_line(aes(group = State), linetype = "dashed", alpha = 0.5) +
geom_smooth(aes(group = Treatment), method = "lm", se = FALSE) +
labs(title = "Difference-in-Differences Plot",
x = "Year",
y = "Log_Revenue") +
theme_minimal()
# Display the plot
print(did_plot)
did_plot <- ggplot(combined_data_C1, aes(x = Year, y = Log_Revenue, color = factor(State))) +
geom_line(aes(linetype = factor(Treatment)), alpha = 0.5) +
labs(title = "Difference-in-Differences Plot",
x = "Year",
y = "Log_Revenue") +
theme_minimal()
# Display the plot
print(did_plot)
# Create DiD plot without geom_smooth
did_plot <- ggplot(combined_data_C1, aes(x = Year, y = Log_Revenue, color = factor(State))) +
geom_line(aes(linetype = ifelse(State == "Nebraska", "Treatment", "Control")), alpha = 0.5) +
labs(title = "Difference-in-Differences Plot",
x = "Year",
y = "Log_Revenue") +
theme_minimal()
# Display the plot
print(did_plot)
# Create a variable to distinguish between Treatment and Control
combined_data_C1$group <- ifelse(combined_data_C1$State == "Nebraska", "Treatment", "Control")
# Create DiD plot
did_plot <- ggplot(combined_data_C1, aes(x = Year, y = Log_Revenue, color = group)) +
geom_line(aes(group = group, linetype = group), alpha = 0.5) +
labs(title = "Difference-in-Differences Plot",
x = "Year",
y = "Log_Revenue") +
theme_minimal()
# Display the plot
print(did_plot)
#Calloway set seed so everything is reproducible
set.seed(1814)
# Create a binary treatment variable for Nebraska and phase-in years
combined_data_C1$Treatment <- ifelse(combined_data_C1$State == "Nebraska" & combined_data_C1$Year %in% > 1986, 1, 0)
#Calloway set seed so everything is reproducible
set.seed(1814)
# Create a binary treatment variable for Nebraska and phase-in years
combined_data_C1$Treatment <- ifelse(combined_data_C1$State == "Nebraska" & combined_data_C1$Year > 1986, 1, 0)
View(combined_data_C1)
example_attgt <- att_gt(yname = "Log_Revenue",
tname = "Year",
idname = "State",
gname = "Treatment",
xformla = ~X,
data = combined_data_C1
)
install.packages("did")
library(did)
example_attgt <- att_gt(yname = "Log_Revenue",
tname = "Year",
idname = "State",
gname = "Treatment",
xformla = ~X,
data = combined_data_C1
)
example_attgt <- att_gt(yname = "Log_Revenue",
tname = "Year",
idname = "State",
gname = "Treatment",
xformla = ~1,
data = combined_data_C1
)
# Create a new column "StateNum" with numeric values for each state
combined_data_C1$StateNum <- as.numeric(factor(combined_data_C1$State, levels = unique(combined_data_C1$State)))
# estimate group-time average treatment effects using att_gt method
example_attgt <- att_gt(yname = "Log_Revenue",
tname = "Year",
idname = "StateNum",
gname = "Treatment",
xformla = ~1,
data = combined_data_C1
)
View(combined_data_C1)
# Create a binary treatment variable for Nebraska and phase-in years
combined_data_C1$Treatment <- ifelse(combined_data_C1$State == "Nebraska" & combined_data_C1$Year > 1986, 1, 0)
# estimate group-time average treatment effects using att_gt method
example_attgt <- att_gt(yname = "Log_Revenue",
tname = "Year",
idname = "StateNum",
gname = "Treatment",
xformla = ~1,
data = combined_data_C1
)
install.packages("did2s")
library(did2s)
View(Just_NE_1999)
reg1=lm(Log_Revenue~Treatment)
reg1=lm(Log_Revenue~Treatment,data=combined_data_C1)
reg1=lm(Log_Revenue~Treatment+Post_Period+Treatment*Post_Period ,data=combined_data_C1)
summary(reg1)
reg1=lm(Log_Revenue~Treatment+Post_Period+(Treatment*Post_Period ),data=combined_data_C1)
summary(reg1)
qplot(x = predicted, y = Log_Revenue, color = as.factor(Treatment), data = combined_data_C1) +
geom_abline(intercept = 0, slope = 1, linetype = "dashed") +  # Add a dashed line for reference
labs(title = "Scatter Plot of Actual vs Predicted Values",
x = "Predicted Values",
y = "Actual Values",
color = "Treatment") +
theme_minimal()
combined_data_C1$predicted <- predict(reg1)
ggplot(combined_data_C1, aes(x = predicted, y = Log_Revenue, color = as.factor(Treatment))) +
geom_point() +
geom_abline(intercept = 0, slope = 1, linetype = "dashed") +  # Add a dashed line for reference
labs(title = "Scatter Plot of Actual vs Predicted Values",
x = "Predicted Values",
y = "Actual Values",
color = "Treatment") +
theme_minimal()
# Take average value of 'work' by year, conditional on anykids
minfo = aggregate(combined_data_C1$Log_Revenue, list(combined_data_C1$Year), mean)
View(minfo)
minfo = aggregate(combined_data_C1$Log_Revenue, list(combined_data_C1$Year, combined_data_C1$Treatment), mean)
# rename column headings (variables)
names(minfo) = c("YR","Treatment", "LFPR")
# Attach a new column with labels
minfo$Group[1:12] = "No policy"
minfo$Group = "No policy"
minfo$Group[13:] = "Policy"
minfo$Group[13:53] = "Policy"
require(ggplot2)    #package for creating nice plots
qplot(YR, LFPR, data=minfo, geom=c("point","line"), colour=Group,
xlab="Year", ylab="Labor Force Participation Rate")+geom_vline(xintercept = 1987)
minfo = aggregate(combined_data_C1$Log_Revenue, list(combined_data_C1$Year, combined_data_C1$Treatment==1), mean)
# rename column headings (variables)
names(minfo) = c("YR","Treatment", "LFPR")
# Attach a new column with labels
minfo$Group = "No policy"
minfo$Group[13:53] = "Policy"
#minfo
require(ggplot2)    #package for creating nice plots
qplot(YR, LFPR, data=minfo, geom=c("point","line"), colour=Group,
xlab="Year", ylab="Labor Force Participation Rate")+geom_vline(xintercept = 1987)
minfo = aggregate(combined_data_C1$Log_Revenue, list(combined_data_C1$Year, combined_data_C1$Treatment==1), mean)
View(minfo)
View(combined_data_C1)
minfo = aggregate(combined_data_C1$Log_Revenue, list(combined_data_C1$Year, combined_data_C1$Treatment==1), mean)
View(minfo)
minfo2 = aggregate(combined_data_C1$Log_Revenue, list(combined_data_C1$Year, combined_data_C1$Treatment==0), mean)
View(minfo2)
# Create a binary treatment variable for Nebraska and phase-in years
combined_data_C1$Treatment <- ifelse(combined_data_C1$State == "Nebraska", 1, 0)
View(combined_data_C1)
reg1=lm(Log_Revenue~Treatment+Post_Period+(Treatment*Post_Period ),data=combined_data_C1)
summary(reg1)
minfo = aggregate(combined_data_C1$Log_Revenue, list(combined_data_C1$Year, combined_data_C1$Treatment==1), mean)
View(minfo)
minfo2 = aggregate(combined_data_C1$Log_Revenue, list(combined_data_C1$Year, combined_data_C1$Treatment==0), mean)
View(minfo2)
hbind(minfo, minfo2)
rbind(minfo, minfo2)
minfo = rbind(minfo, minfo2)
View(minfo)
minfo = aggregate(combined_data_C1$Log_Revenue, list(combined_data_C1$Year, combined_data_C1$Treatment==1), mean)
View(minfo)
minfo = aggregate(combined_data_C1$Log_Revenue, list(combined_data_C1$Year, combined_data_C1$Treatment==1), mean)
# rename column headings (variables)
names(minfo) = c("YR","Treatment", "LFPR")
# Attach a new column with labels
minfo$Group = "No policy"
minfo$Group[33:64] = "Policy"
#minfo
require(ggplot2)    #package for creating nice plots
qplot(YR, LFPR, data=minfo, geom=c("point","line"), colour=Group,
xlab="Year", ylab="Log Revenue")+geom_vline(xintercept = 1987)
minfo = aggregate(combined_data_C1$Log_Revenue, list(combined_data_C1$Year, combined_data_C1$Treatment==1), stderr())
minfo = aggregate(combined_data_C1$Log_Revenue, list(combined_data_C1$Year, combined_data_C1$Treatment==1), std)
qplot(YR, LFPR, data=minfo, geom=c("point","line"), colour=Group,
xlab="Year", ylab="Log Revenue")+geom_vline(xintercept = 1987)+geom_vline(xintercept = 1992)
# Attach a new column with labels
minfo$Group = "Never Switch to SSFA"
minfo$Group[33:64] = "Nebraska"
#minfo
qplot(YR, LFPR, data=minfo, geom=c("point","line"), colour=Group,
xlab="Year", ylab="Log Revenue")+geom_vline(xintercept = 1987)+geom_vline(xintercept = 1992)
example_attgt <- att_gt(yname = "Log_Revenue",
tname = "Year",
idname = "State_Num",
gname = "Treatment",
xformla = ~1,
data = combined_data_C1
)
example_attgt <- att_gt(yname = "Log_Revenue",
tname = "Year",
idname = "StateNum",
gname = "Treatment",
xformla = ~1,
data = combined_data_C1
)
combined_data_C1$first_t <- ifelse(combined_data_C1$State == "Nebraska" & combined_data_C1$Year == 1986, 1, 0)
example_attgt <- att_gt(yname = "Log_Revenue",
tname = "Year",
idname = "StateNum",
gname = "first_t",
xformla = ~1,
data = combined_data_C1
)
combined_data_C1$value.lm <- reg1$fitted.values
View(combined_data_C1)
combined_data_C1$fitted <- reg1$fitted.values
minfo = aggregate(combined_data_C1$fitted, list(combined_data_C1$Year, combined_data_C1$Treatment==1), mean)
qplot(YR, LFPR, data=minfo, geom=c("point","line"), colour=Group,
xlab="Year", ylab="Log Revenue")+geom_vline(xintercept = 1987)+geom_vline(xintercept = 1992)
minfo$Group = "Never Switch to SSFA"
minfo$Group[33:64] = "Nebraska"
names(minfo) = c("YR","Treatment", "LFPR")
qplot(YR, LFPR, data=minfo, geom=c("point","line"), colour=Group,
xlab="Year", ylab="Log Revenue")+geom_vline(xintercept = 1987)+geom_vline(xintercept = 1992)
minfo = aggregate(combined_data_C1$fitted, list(combined_data_C1$Year, combined_data_C1$Treatment==1), mean)
View(minfo)
reg6 <- feols(Log_Revenue~ i(Year,Treatment,1987), data = combined_data_C1)
coefplot(reg6)
coefplot(reg6)+geom_vline(xintercept = 1987)+geom_vline(xintercept = 1992)
## Call:
## lm(formula = work ~ post93 + anykids + post93 * anykids, data = eitc)
# Take average value of 'work' by year, conditional on anykids
minfo = aggregate(combined_data_C1$fitted, list(combined_data_C1$Year, combined_data_C1$Treatment==1), mean)
abline(v = 1987, col = "red", lty = 2)  # Change color and line type if needed
# Show the coefficient plot
print(coef_plot)
coefplot(reg6)
abline(v = 1987, col = "red", lty = 2)  # Change color and line type if needed
# Show the coefficient plot
print(coef_plot)
coefplot <- coefplot(reg6)
abline(v = 1987, col = "red", lty = 2)  # Change color and line type if needed
# Show the coefficient plot
print(coef_plot)
print(coefplot)
coefplot <- coefplot(reg6)
abline(v = 1987, col = "red", lty = 2)  # Change color and line type if needed
# Show the coefficient plot
print(coefplot)
ggplot(predictions, aes(x = Treatment, y = Log_Revenue)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE, color = "blue") +
geom_vline(xintercept = 0.5, linetype = "dashed", color = "red") +  # Add a vertical line at x = 0.5
labs(title = "Regression Plot with Vertical Line",
x = "Treatment",
y = "Log_Revenue") +
theme_minimal()
# Create a predicted values dataframe
predictions <- data.frame(Log_Revenue = predict(reg1, newdata = combined_data_C1), Treatment = combined_data_C1$Treatment)
# Plot the predicted values and add a vertical line
library(ggplot2)
ggplot(predictions, aes(x = Treatment, y = Log_Revenue)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE, color = "blue") +
geom_vline(xintercept = 0.5, linetype = "dashed", color = "red") +  # Add a vertical line at x = 0.5
labs(title = "Regression Plot with Vertical Line",
x = "Treatment",
y = "Log_Revenue") +
theme_minimal()
coefplot <- coefplot(reg6,ref.line=1987)
# Show the coefficient plot
print(coefplot)
coefplot(reg6,ref.line=1987)
coefplot(reg6, ref.line==1987)
iplot(reg6, ref.line=1987)
iplot(reg6, ref.line= c(1987,1992))
#This was correct and ran:
reg7 <- feols(Log_Revenue~ i(Year,Treatment,1987), data = combined_data_C2)
View(combined_data_C2)
# Create a binary treatment variable for Nebraska and phase-in years
combined_data_C2$Treatment <- ifelse(combined_data_C2$State == "Nebraska", 1, 0)
#This was correct and ran:
reg7 <- feols(Log_Revenue~ i(Year,Treatment,1987), data = combined_data_C2)
coefplot(reg6, ref.line=1987)
iplot(reg7, ref.line= c(1987,1992))
# Create a binary treatment variable for Nebraska and phase-in years
combined_data_C3$Treatment <- ifelse(combined_data_C3$State == "Nebraska", 1, 0)
#This was correct and ran:
reg8 <- feols(Log_Revenue~ i(Year,Treatment,1987), data = combined_data_C3)
coefplot(reg8, ref.line=1987)
iplot(reg8, ref.line= c(1987,1992))
library(readxl)
library(tidyr)
library(dplyr)
library(tidyverse)
