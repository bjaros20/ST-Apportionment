#Attempt to Get Revenue in R
install.packages("readxl")
install.packages("tidyr")
install.packages("dplyr")
install.packages("did")
install.packages("tidyverse")
install.packages("lmtest")
library(readxl)
library(tidyr)
library(dplyr)
library(did)
library(tidyverse)
library(lmtest)
Census State and Local Data- Tax Foundation
# Census State and Local Data- Tax Foundation
install.packages("readxl")
install.packages("tidyr")
install.packages("dplyr")
install.packages("tidyverse")
install.packages("xlsx")
library(readxl)
library(tidyr)
library(dplyr)
library(tidyverse)
library(xlsx)
#Convert My appt from Wide to Long and Compare to Giroud
#set working directory
setwd("~/Documents/GitHub/ST-Apportionment")
#loadpackages, giroud and your apportionment rates
install.packages("tidyr")
install.packages("dplyr")
install.packages("tidyverse")
library(tidyr)
library(dplyr)
library(tidyverse)
Wide_app <-read_csv("My_App_Wide.csv")
View(Wide_app)
#loadpackages, giroud and your apportionment rates
install.packages("tidyr")
install.packages("dplyr")
install.packages("tidyverse")
install.packages("ggplot2")
library(tidyr)
library(dplyr)
library(tidyverse)
library(ggplot2)
install.packages("tidyr")
Wide_app <-read_csv("My_App_Wide2.csv")
Wide_app <-read_csv("My_App_Wide.csv")
library(tidyr)
library(dplyr)
library(tidyverse)
library(ggplot2)
#Load Documents
Wide_app <-read_csv("My_App_Wide2.csv")
#Load Documents
Wide_app2 <-read_csv("My_App_Wide2.csv")
View(Wide_app2)
View(Wide_app)
View(Wide_app)
Giroud <- read_csv("Giroud.csv")
Giroud_States <-read_csv("Giroud_Just_Appt_States.csv")
View(Giroud_States)
View(Giroud)
Giroud_Just_Appt_Pre85 <- Giroud %>%
select(state_name,year,sales) %>%
filter(year<=1985)
View(Giroud_Just_Appt_Pre85)
Long_app <- Wide_app2 %>%
pivot_longer(cols= "Alabama":"Wyoming",names_to = "State", values_to ="sales")
Long_App2 <-Long_app[order(Long_app$State),]
View(Long_App2)
#save New Long panel
write.csv(Long_App2,file="Oct_App_Long.csv",row.names=FALSE)
Giroud_Just_Appt_Pre85 <- Giroud_Just_Appt_Pre85 %>%
rename(state=state_name)
View(Giroud_Just_Appt_Pre85)
My_App <- Long_App2 %>%
rename(year=Year)
My_App <- My_App %>%
rename(state=State)
View(My_App)
#Cut DC from Giroud
Just_States_Giroud <- Giroud_Just_Appt_Pre85 %>%
filter(state !="District of Columbia")
View(Long_App2)
View(Just_States_Giroud)
merged_df <-merge(Just_States_Giroud,Long_App2, by = c("year","state","sales"))
#Merge Giroud and Long App
merged_df <-merge(Just_States_Giroud,My_App, by = c("year","state","sales"))
View(merged_df)
#filter out 1985
Pre85 <- Just_States_Giroud %>%
filter(year<1985)
#Create an Added Long Panel
combined_df <- rbind(Pre85,My_App)
View(combined_df)
#Eliminate NAs
combined_clean_df <-na.omit(combined_df)
write.csv(combined_df,file="Long_Gir_My_App_Comb.csv",row.names=FALSE)
write.csv(combined_clean_df,file="Long_Gir_My_App_Comb_clean.csv",row.names=FALSE)
View(combined_clean_df)
View(combined_clean_df)
ggplot(combined_clean_df, aes(x=year,y=sales))
ggplot(combined_clean_df, aes(x=year,y=sales,color=state))+geom_point()
ggplot(combined_clean_df, aes(x=year,y=sales,color=state))+geom_line()+
labs(x="Year",y="Sales")+
theme_minimal() +
scale_color_discrete(name="State")
