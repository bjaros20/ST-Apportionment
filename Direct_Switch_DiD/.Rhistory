NE_DiD$time_to_treatment[NE_DiD$state == "Nebraska" & NE_DiD$year > 1988] <-
NE_DiD$year[NE_DiD$state == "Nebraska" & NE_DiD$year > 1988] - 1988
View(NE_DiD)
mod_twfe_NE=feols(Log_CORPINCTX ~
i(time_to_treatment, treatment, ref=-1) |
state + year,
cluser=state,
data = NE_DiD)
#Run the Modified 2WFE w/ feols
mod_twfe_NE=feols(Log_CORPINCTX ~
i(time_to_treatment, treatment, ref=-1) |
state + year,
cluster=state,
data = NE_DiD)
mod_twfe_NE=feols(Log_CORPINCTX ~
i(time_to_treatment, treatment, ref=-1) |
state + year,
data = NE_DiD)
View(mod_twfe_NE)
iplot(mod_twfe_NE,
xlab='Time to treatment',
main='Nebraska Vs. Never & Not-Yet Treated Control Event Study Plot (TWFE)')
mod_twfe_NE2=feols(Log_CORPINCTX ~
i(time_to_treatment, treatment, ref=-1) |
state + year,
data = NE_DiD,
collinear=FALSE)
mod_twfe_NE2=feols(Log_CORPINCTX ~
i(time_to_treatment, ref=-1) |
state + year,
data = NE_DiD)
iplot(mod_twfe_NE2,
xlab='Time to treatment',
main='Event Study Plot: Nebraska Vs. Never & Not-Yet Treated Control (TWFE)')
#Run Treatment to avoid dropping of the pre-period:
mod_twfe_NE3=feols(Log_CORPINCTX ~
i(treatment, ref=-1) |
state + year,
data = NE_DiD)
#Run Treatment to avoid dropping of the pre-period:
mod_twfe_NE3=feols(Log_CORPINCTX ~
i(treatment) |
state + year,
data = NE_DiD)
iplot(mod_twfe_NE3,
xlab='Time to treatment',
main='Event Study Plot: Nebraska Vs. Never & Not-Yet Treated Control (TWFE)')
mod_twfe_NE=feols(Log_CORPINCTX ~
i(time_to_treatment,treatment, ref=-1) |
state + year,
data = NE_DiD,
collin.rm=FALSE)
mod_twfe_NE=feols(Log_CORPINCTX ~
i(time_to_treatment,treatment, ref=-1) |
state + year,
data = NE_DiD,
collin=FALSE)
mod_twfe_NE=feols(Log_CORPINCTX ~
i(time_to_treatment,treatment, ref=-1) |
state + year,
data = NE_DiD,
collin=TRUE)
iplot(mod_twfe_NE,
xlab='Time to treatment',
main='Event Study Plot: Nebraska Vs. Never & Not-Yet Treated Control (TWFE)')
#Run the Modified 2WFE w/ feols
mod_twfe_NE=feols(Log_CORPINCTX ~
i(time_to_treatment,treatment, ref=-1) |
state + year,
data = NE_DiD,
collin.tol=TRUE)
mod_twfe_NE=feols(Log_CORPINCTX ~
i(time_to_treatment,treatment, ref=-1) |
state + year,
data = NE_DiD,
collin.tol=FALSE)
mod_twfe_NE=feols(Log_CORPINCTX ~
i(time_to_treatment,treatment, ref=-1) |
state + year,
data = NE_DiD,
collin.rm=FALSE)
iplot(mod_twfe_NE,
xlab='Time to treatment',
main='Event Study Plot: Nebraska Vs. Never & Not-Yet Treated Control (TWFE)')
#Manually create interaction term between time_to_treatment and Treatment to try and get around collinear drops
NE_DiD$time_to_treatment_interaction <- NE_DiD$time_to_treatment * NE_DiD$treatment
mod_twfe_NE4 <- feols(Log_CORPINCTX ~ time_to_treatment_interaction +
state + year | state + year,
data = NE_DiD)
mod_twfe_NE4 <- feols(Log_CORPINCTX ~ time_to_treatment_interaction
| state + year,
data = NE_DiD)
#Plot of Manual interaction Term
iplot(mod_twfe_NE4,
xlab='Time to treatment',
main='Event Study Plot: Nebraska Vs. Never & Not-Yet Treated Control (TWFE)')
mod_twfe_NE4 <- feols(Log_CORPINCTX ~ i(time_to_treatment_interaction, ref=-1)
| state + year,
data = NE_DiD)
iplot(mod_twfe_NE4,
xlab='Time to treatment',
main='Event Study Plot: Nebraska Vs. Never & Not-Yet Treated Control (TWFE)')
mod_twfe_NE5 <- feols(Log_CORPINCTX ~ time_to_treatment +
treatment + state + year | state + year,
data = NE_DiD)
#Attempt to Run twfe w/o i notation
mod_twfe_NE5 <- feols(Log_CORPINCTX ~ time_to_treatment +
treatment + year | state + year,
data = NE_DiD)
mod_twfe_NE5 <- feols(Log_CORPINCTX ~ time_to_treatment +
treatment | state + year,
data = NE_DiD)
#Attempt to Run twfe w/o i notation
mod_twfe_NE6 <- feols(Log_CORPINCTX ~ i(time_to_treatment,
treatment) | state + year,
data = NE_DiD)
#Attempt to Run twfe w/o i notation
mod_twfe_NE6 <- feols(Log_CORPINCTX ~
i(time_to_treatment, treatment, ref=-1) |
state + year,
data = NE_DiD)
mod_twfe_NE6 <- feols(Log_CORPINCTX ~
i(time_to_treatment, treatment, ref=-1) |
state + year,
data = NE_DiD
collin.rm=FALSE)
#Attempt to Run twfe w/o i notation
mod_twfe_NE6 <- feols(Log_CORPINCTX ~
i(time_to_treatment, treatment, ref=-1) |
state + year,
data = NE_DiD
collin.rm==FALSE)
#Attempt to Run twfe w/o i notation
mod_twfe_NE6 <- feols(Log_CORPINCTX ~
i(time_to_treatment, treatment, ref=-1) |
state + year,
data = NE_DiD,
collin.rm==FALSE)
#Attempt to Run twfe w/o i notation
mod_twfe_NE6 <- feols(Log_CORPINCTX ~
i(time_to_treatment, treatment, ref=-1) |
state + year,
data = NE_DiD,
collin.tol=FALSE)
#Attempt to Run twfe w/o i notation
mod_twfe_NE6 <- feols(Log_CORPINCTX ~
i(time_to_treatment, treatment, ref=-1) |
state + year,
data = NE_DiD,
collin.tol<0)
#Attempt to Run twfe w/o i notation
mod_twfe_NE6 <- feols(Log_CORPINCTX ~
i(time_to_treatment, treatment, ref=-1) |
state + year,
data = NE_DiD,
collin.tol=vcov<0)
MO_DiD <- Rev2 %>%
filter(State_Acronym=="MO"|State_Acronym=="AK"| State_Acronym=="HI"|State_Acronym=="KS"|State_Acronym=="NM"|State_Acronym=="OK"|State_Acronym=="AL"|State_Acronym=="MT")
#Create Treatment Column for NE
MO_DiD['treatment'] <- 0
MO_DiD[which(MO_DiD$state=="Missouri" & MO_DiD$year>1999),"treatment"]<-1
MO_fit_tw_Log <- feols(Log_CORPINCTX ~
treatment |
state + year,
data = MO_DiD)
summary(MO_fit_tw_Log)
#Create a time to treatment column for all states and all periods and set default to 0
MO_DiD$time_to_treatment <- 0
#Set Treatment Year of 0 in time to treatment column
MO_DiD$time_to_treatment[MO_DiD$state == "Missouri" & MO_DiD$year == 1999] <- 0
#Get Decreasing Negative Numbers for time Prior to treatment for Missouri
NE_DiD$time_to_treatment[NE_DiD$state == "Missouri" & NE_DiD$year < 1999] <-
(1999 - NE_DiD$year[NE_DiD$state == "Missouri" & NE_DiD$year < 1999])*-1
#Get increasing Positive Numbers for Nebrask after Treatment
NE_DiD$time_to_treatment[NE_DiD$state == "Missouri" & NE_DiD$year > 1999] <-
NE_DiD$year[NE_DiD$state == "Missouri" & NE_DiD$year > 1999] - 1999
View(MO_DiD)
View(MO_DiD)
#Get Decreasing Negative Numbers for time Prior to treatment for Missouri
MO_DiD$time_to_treatment[MO_DiD$state == "Missouri" & MO_DiD$year < 1999] <-
(1999 - MO_DiD$year[MO_DiD$state == "Missouri" & MO_DiD$year < 1999])*-1
#Get increasing Positive Numbers for Nebrask after Treatment
MO_DiD$time_to_treatment[MO_DiD$state == "Missouri" & MO_DiD$year > 1999] <-
MO_DiD$year[MO_DiD$state == "Missouri" & MO_DiD$year > 1999] - 1999
View(MO_DiD)
#Run the Modified 2WFE w/ feols
mod_twfe_MO=feols(Log_CORPINCTX ~
i(time_to_treatment,treatment, ref=-1) |
state + year,
data = MO_DiD)
iplot(mod_twfe_MO,
xlab='Time to treatment',
main='Event Study Plot: Missouri Vs. Never & Not-Yet Treated Control (TWFE)')
mod_twfe_MO2 <- feols(Log_CORPINCTX ~
i(time_to_treatment, ref=-1) |
state + year,
data = MO_DiD)
#Plot
iplot(mod_twfe_MO2,
xlab='Time to treatment',
main='Event Study Plot: Missouri Vs. Never & Not-Yet Treated Control (TWFE)')
RevMo<- Rev %>%
filter(c(year>=1979 & year <=2019))
RevMo <- RevMo %>%
mutate(Log_CORPINCTX=log(CORPINCTX))
View(RevMo)
#Run this again with the larger range of years for the plot:
MO_DiD <- RevMo %>%
filter(State_Acronym=="MO"|State_Acronym=="AK"| State_Acronym=="HI"|State_Acronym=="KS"|State_Acronym=="NM"|State_Acronym=="OK"|State_Acronym=="AL"|State_Acronym=="MT")
#Create Treatment Column for MO
MO_DiD['treatment'] <- 0
MO_DiD[which(MO_DiD$state=="Missouri" & MO_DiD$year>1999),"treatment"]<-1
#Create a time to treatment column for all states and all periods and set default to 0
MO_DiD$time_to_treatment <- 0
#Set Treatment Year of 0 in time to treatment column
MO_DiD$time_to_treatment[MO_DiD$state == "Missouri" & MO_DiD$year == 1999] <- 0
#Get Decreasing Negative Numbers for time Prior to treatment for Missouri
MO_DiD$time_to_treatment[MO_DiD$state == "Missouri" & MO_DiD$year < 1999] <-
(1999 - MO_DiD$year[MO_DiD$state == "Missouri" & MO_DiD$year < 1999])*-1
#Get increasing Positive Numbers for Nebrask after Treatment
MO_DiD$time_to_treatment[MO_DiD$state == "Missouri" & MO_DiD$year > 1999] <-
MO_DiD$year[MO_DiD$state == "Missouri" & MO_DiD$year > 1999] - 1999
#Run the Modified 2WFE w/ feols
mod_twfe_MO=feols(Log_CORPINCTX ~
i(time_to_treatment,treatment, ref=-1) |
state + year,
data = MO_DiD)
#Attempt to Run twfe w/o variables dropping
mod_twfe_MO2 <- feols(Log_CORPINCTX ~
i(time_to_treatment, ref=-1) |
state + year,
data = MO_DiD)
#Plot
iplot(mod_twfe_MO2,
xlab='Time to treatment',
main='Event Study Plot: Missouri Vs. Never & Not-Yet Treated Control (TWFE)')
Rev <- Rev %>%
mutate(Log_CORPINCTX=log(CORPINCTX))
RevMS<- Rev %>%
filter(c(year>=1983 & year <=2010))
MS_DiD <- RevMS %>%
filter(State_Acronym=="MS"|State_Acronym=="AK"| State_Acronym=="HI"|State_Acronym=="KS"|State_Acronym=="NM"|State_Acronym=="OK"|State_Acronym=="AL"|State_Acronym=="MT")
#Create Treatment Column for MO
MS_DiD['treatment'] <- 0
MS_DiD[which(MS_DiD$state=="Missouri" & MS_DiD$year>2003),"treatment"]<-1
#Fit TW FE Log, but better, Wards Package
MS_fit_tw_Log <- feols(Log_CORPINCTX ~
treatment |
state + year,
data = MS_DiD)
summary(MS_fit_tw_Log)
View(MS_DiD)
#Create Treatment Column for MO
MS_DiD['treatment'] <- 0
MS_DiD[which(MS_DiD$state=="Mississippi" & MS_DiD$year>2003),"treatment"]<-1
#Fit TW FE Log, but better, Wards Package
MS_fit_tw_Log <- feols(Log_CORPINCTX ~
treatment |
state + year,
data = MS_DiD)
summary(MS_fit_tw_Log)
#Create a time to treatment column for all states and all periods and set default to 0
MS_DiD$time_to_treatment <- 0
#Set Treatment Year of 0 in time to treatment column
MS_DiD$time_to_treatment[MS_DiD$state == "Mississippi" & MS_DiD$year == 2003] <- 0
#Get Decreasing Negative Numbers for time Prior to treatment for Mississippi
MS_DiD$time_to_treatment[MS_DiD$state == "Mississippi" & MS_DiD$year < 2003] <-
(2003 - MS_DiD$year[MS_DiD$state == "Mississippi" & MS_DiD$year < 2003])*-1
#Get increasing Positive Numbers for Nebrask after Treatment
MS_DiD$time_to_treatment[MS_DiD$state == "Mississippi" & MS_DiD$year > 2003] <-
MS_DiD$year[MS_DiD$state == "Mississippi" & MS_DiD$year > 2003] - 2003
#Run the Modified 2WFE w/ feols
mod_twfe_MO=feols(Log_CORPINCTX ~
i(time_to_treatment,treatment, ref=-1) |
state + year,
data = MS_DiD)
iplot(mod_twfe_MO,
xlab='Time to treatment',
main='Event Study Plot: Mississippi Vs. Never & Not-Yet Treated Control (TWFE)')
#Attempt to Run twfe w/o variables dropping
mod_twfe_MS2 <- feols(Log_CORPINCTX ~
i(time_to_treatment, ref=-1) |
state + year,
data = MS_DiD)
#Attempt to Run twfe w/o variables dropping
mod_twfe_MS2 <- feols(Log_CORPINCTX ~
i(time_to_treatment, ref=-1) |
state + year,
data = MS_DiD)
#Plot
iplot(mod_twfe_MS2,
xlab='Time to treatment',
main='Event Study Plot: Mississippi Vs. Never & Not-Yet Treated Control (TWFE)')
RevCO<- Rev %>%
filter(c(year>=1988 & year <=2021))
CO_DiD <- RevCO %>%
filter(State_Acronym=="MO"|State_Acronym=="AK"| State_Acronym=="HI"|State_Acronym=="KS"|State_Acronym=="NM"|State_Acronym=="OK"|State_Acronym=="MT")
#Create Treatment Column for MO
CO_DiD['treatment'] <- 0
CO_DiD[which(CO_DiD$state=="Colorado" & CO_DiD$year>2008),"treatment"]<-1
#Fit TW FE Log, but better, Wards Package
CO_fit_tw_Log <- feols(Log_CORPINCTX ~
treatment |
state + year,
data = CO_DiD)
View(CO_DiD)
View(CO_DiD)
CO_DiD <- RevCO %>%
filter(State_Acronym=="CO"|State_Acronym=="AK"| State_Acronym=="HI"|State_Acronym=="KS"|State_Acronym=="NM"|State_Acronym=="OK"|State_Acronym=="MT")
#Create Treatment Column for MO
CO_DiD['treatment'] <- 0
CO_DiD[which(CO_DiD$state=="Colorado" & CO_DiD$year>2008),"treatment"]<-1
#Fit TW FE Log, but better, Wards Package
CO_fit_tw_Log <- feols(Log_CORPINCTX ~
treatment |
state + year,
data = CO_DiD)
summary(CO_fit_tw_Log)
#Set Treatment Year of 0 in time to treatment column
CO_DiD$time_to_treatment[CO_DiD$state == "Colorado" & CO_DiD$year == 2008] <- 0
#Create a time to treatment column for all states and all periods and set default to 0
CO_DiD$time_to_treatment <- 0
#Create a time to treatment column for all states and all periods and set default to 0
CO_DiD$time_to_treatment <- 0
#Set Treatment Year of 0 in time to treatment column
CO_DiD$time_to_treatment[CO_DiD$state == "Colorado" & CO_DiD$year == 2008] <- 0
#Get Decreasing Negative Numbers for time Prior to treatment for Colorado
CO_DiD$time_to_treatment[CO_DiD$state == "Colorado" & CO_DiD$year < 2008] <-
(2008 - CO_DiD$year[CO_DiD$state == "Colorado" & CO_DiD$year < 2008])*-1
#Get increasing Positive Numbers for Nebrask after Treatment
CO_DiD$time_to_treatment[CO_DiD$state == "Colorado" & CO_DiD$year > 2008] <-
CO_DiD$year[CO_DiD$state == "Colorado" & CO_DiD$year > 2008] - 2008
#Run the Modified 2WFE w/ feols
mod_twfe_CO=feols(Log_CORPINCTX ~
i(time_to_treatment,treatment, ref=-1) |
state + year,
data = CO_DiD)
#Plot
iplot(mod_twfe_CO,
xlab='Time to treatment',
main='Event Study Plot: Colorado Vs. Never & Not-Yet Treated Control (TWFE)')
#Attempt to Run twfe w/o variables dropping
mod_twfe_CO2 <- feols(Log_CORPINCTX ~
i(time_to_treatment, ref=-1) |
state + year,
data = CO_DiD)
#Plot
iplot(mod_twfe_CO2,
xlab='Time to treatment',
main='Event Study Plot: Colorado Vs. Never & Not-Yet Treated Control (TWFE)')
#Rhode Island
#Time for Mississippi
RevRI<- Rev %>%
filter(c(year>=1983 & year <=2021))
RevRI<- Rev %>%
filter(c(year>=1990 & year <=2021))
RI_DiD <- RevRI %>%
filter(State_Acronym=="RI"|State_Acronym=="AK"| State_Acronym=="HI"|State_Acronym=="KS"|State_Acronym=="NM"|State_Acronym=="OK"|State_Acronym=="MT")
#Create Treatment Column for MO
RI_DiD['treatment'] <- 0
RI_DiD[which(RI_DiD$state=="Rhode Island" & RI_DiD$year>2014),"treatment"]<-1
#Fit TW FE Log, but better, Wards Package
RI_fit_tw_Log <- feols(Log_CORPINCTX ~
treatment |
state + year,
data = RI_DiD)
summary(RI_fit_tw_Log)
#Create a time to treatment column for all states and all periods and set default to 0
RI_DiD$time_to_treatment <- 0
#Set Treatment Year of 0 in time to treatment column
RI_DiD$time_to_treatment[RI_DiD$state == "Rhode Island" & RI_DiD$year == 2014] <- 0
#Create a time to treatment column for all states and all periods and set default to 0
RI_DiD$time_to_treatment <- 0
#Set Treatment Year of 0 in time to treatment column
RI_DiD$time_to_treatment[RI_DiD$state == "Rhode Island" & RI_DiD$year == 2014] <- 0
#Get Decreasing Negative Numbers for time Prior to treatment for Rhode Island
RI_DiD$time_to_treatment[RI_DiD$state == "Rhode Island" & RI_DiD$year < 2014] <-
(2014 - RI_DiD$year[RI_DiD$state == "Rhode Island" & RI_DiD$year < 2014])*-1
#Get increasing Positive Numbers for Rhode Island after Treatment
RI_DiD$time_to_treatment[RI_DiD$state == "Rhode Island" & RI_DiD$year > 2014] <-
RI_DiD$year[RI_DiD$state == "Rhode Island" & RI_DiD$year > 2014] - 2014
#Run the Modified 2WFE w/ feols
mod_twfe_RI=feols(Log_CORPINCTX ~
i(time_to_treatment,treatment, ref=-1) |
state + year,
data = RI_DiD)
iplot(mod_twfe_RI,
xlab='Time to treatment',
main='Event Study Plot: Rhode Island Vs. Never & Not-Yet Treated Control (TWFE)')
#Attempt to Run twfe w/o variables dropping
mod_twfe_RI2 <- feols(Log_CORPINCTX ~
i(time_to_treatment, ref=-1) |
state + year,
data = RI_DiD)
#Attempt to Run twfe w/o variables dropping
mod_twfe_RI2 <- feols(Log_CORPINCTX ~
i(time_to_treatment, ref=-1) |
state + year,
data = RI_DiD)
#Plot
iplot(mod_twfe_RI2,
xlab='Time to treatment',
main='Event Study Plot: Rhode Island Vs. Never & Not-Yet Treated Control (TWFE)')
RevND<- Rev %>%
filter(c(year>=1995 & year <=2021))
ND_DiD <- RevND %>%
filter(State_Acronym=="ND"|State_Acronym=="AK"| State_Acronym=="HI"|State_Acronym=="KS"|State_Acronym=="NM"|State_Acronym=="OK"|State_Acronym=="MT")
RevND<- Rev %>%
filter(c(year>=1995 & year <=2021))
ND_DiD <- RevND %>%
filter(State_Acronym=="ND"|State_Acronym=="AK"| State_Acronym=="HI"|State_Acronym=="KS"|State_Acronym=="NM"|State_Acronym=="OK"|State_Acronym=="MT")
#Create Treatment Column for MO
ND_DiD['treatment'] <- 0
ND_DiD[which(ND_DiD$state=="North Dakota" & ND_DiD$year>2016),"treatment"]<-1
#Fit TW FE Log, but better, Wards Package
ND_fit_tw_Log <- feols(Log_CORPINCTX ~
treatment |
state + year,
data = ND_DiD)
#Fit TW FE Log, but better, Wards Package
ND_fit_tw_Log <- feols(Log_CORPINCTX ~
treatment |
state + year,
data = ND_DiD)
summary(ND_fit_tw_Log)
#Create a time to treatment column for all states and all periods and set default to 0
ND_DiD$time_to_treatment <- 0
#Set Treatment Year of 0 in time to treatment column
ND_DiD$time_to_treatment[ND_DiD$state == "North Dakota" & ND_DiD$year == 2016] <- 0
#Get Decreasing Negative Numbers for time Prior to treatment for North Dakota
ND_DiD$time_to_treatment[ND_DiD$state == "North Dakota" & ND_DiD$year < 2016] <-
(2016 - ND_DiD$year[ND_DiD$state == "North Dakota" & ND_DiD$year < 2016])*-1
#Get increasing Positive Numbers for North Dakota after Treatment
ND_DiD$time_to_treatment[ND_DiD$state == "North Dakota" & ND_DiD$year > 2016] <-
ND_DiD$year[ND_DiD$state == "North Dakota" & ND_DiD$year > 2016] - 2016
#Run the Modified 2WFE w/ feols
mod_twfe_ND=feols(Log_CORPINCTX ~
i(time_to_treatment,treatment, ref=-1) |
state + year,
data = ND_DiD)
iplot(mod_twfe_ND,
xlab='Time to treatment',
main='Event Study Plot: North Dakota Vs. Never & Not-Yet Treated Control (TWFE)')
#Attempt to Run twfe w/o variables dropping
mod_twfe_ND2 <- feols(Log_CORPINCTX ~
i(time_to_treatment, ref=-1) |
state + year,
data = ND_DiD)
#Plot
iplot(mod_twfe_ND2,
xlab='Time to treatment',
main='Event Study Plot: North Dakota Vs. Never & Not-Yet Treated Control (TWFE)')
RevDE<- Rev %>%
filter(c(year>=1995 & year <=2021))
DE_DiD <- RevDE %>%
filter(State_Acronym=="DE"|State_Acronym=="AK"| State_Acronym=="HI"|State_Acronym=="KS"|State_Acronym=="NM"|State_Acronym=="OK"|State_Acronym=="MT")
#Create Treatment Column for MO
DE_DiD['treatment'] <- 0
DE_DiD[which(MO_DiD$state=="Delaware" & DE_DiD$year>2017),"treatment"]<-1
#Create Treatment Column for MO
DE_DiD['treatment'] <- 0
DE_DiD[which(DE_DiD$state=="Delaware" & DE_DiD$year>2017),"treatment"]<-1
#Fit TW FE Log, but better, Wards Package
DE_fit_tw_Log <- feols(Log_CORPINCTX ~
treatment |
state + year,
data = DE_DiD)
summary(DE_fit_tw_Log)
#Create a time to treatment column for all states and all periods and set default to 0
DE_DiD$time_to_treatment <- 0
#Set Treatment Year of 0 in time to treatment column
DE_DiD$time_to_treatment[DE_DiD$state == "Delware" & DE_DiD$year == 2017] <- 0
#Get Decreasing Negative Numbers for time Prior to treatment for Delware
DE_DiD$time_to_treatment[DE_DiD$state == "Delware" & DE_DiD$year < 2017] <-
(2017 - DE_DiD$year[DE_DiD$state == "Delware" & DE_DiD$year < 2017])*-1
#Get increasing Positive Numbers for Nebrask after Treatment
DE_DiD$time_to_treatment[DE_DiD$state == "Delware" & DE_DiD$year > 2017] <-
DE_DiD$year[DE_DiD$state == "Delware" & DE_DiD$year > 2017] - 2017
#Run the Modified 2WFE w/ feols
mod_twfe_DE=feols(Log_CORPINCTX ~
i(time_to_treatment,treatment, ref=-1) |
state + year,
data = DE_DiD)
View(DE_DiD)
#Create a time to treatment column for all states and all periods and set default to 0
DE_DiD$time_to_treatment <- 0
#Set Treatment Year of 0 in time to treatment column
DE_DiD$time_to_treatment[DE_DiD$state == "Delaware" & DE_DiD$year == 2017] <- 0
#Get Decreasing Negative Numbers for time Prior to treatment for Delware
DE_DiD$time_to_treatment[DE_DiD$state == "Delaware" & DE_DiD$year < 2017] <-
(2017 - DE_DiD$year[DE_DiD$state == "Delaware" & DE_DiD$year < 2017])*-1
#Get increasing Positive Numbers for Nebrask after Treatment
DE_DiD$time_to_treatment[DE_DiD$state == "Delaware" & DE_DiD$year > 2017] <-
DE_DiD$year[DE_DiD$state == "Delaware" & DE_DiD$year > 2017] - 2017
#Run the Modified 2WFE w/ feols
mod_twfe_DE=feols(Log_CORPINCTX ~
i(time_to_treatment,treatment, ref=-1) |
state + year,
data = DE_DiD)
#Plot
iplot(mod_twfe_DE,
xlab='Time to treatment',
main='Event Study Plot: Delaware Vs. Never & Not-Yet Treated Control (TWFE)')
#Attempt to Run twfe w/o variables dropping
mod_twfe_DE2 <- feols(Log_CORPINCTX ~
i(time_to_treatment, ref=-1) |
state + year,
data = DE_DiD)
#Plot
iplot(mod_twfe_DE2,
xlab='Time to treatment',
main='Event Study Plot: Delware Vs. Never & Not-Yet Treated Control (TWFE)')
